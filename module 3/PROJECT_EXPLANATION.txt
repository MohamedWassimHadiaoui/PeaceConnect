================================================================================
    PEACECONNECT MODULE 3 - MVC BACKEND PROJECT EXPLANATION
================================================================================

ğŸ“š TABLE OF CONTENTS:
1. Project Overview
2. MVC Architecture Explanation
3. Project Structure
4. Database Design
5. How Each Component Works
6. Validation System (Client & Server)
7. How to Demonstrate the Project
8. Key Points to Explain to Teacher

================================================================================
1. PROJECT OVERVIEW
================================================================================

This is a CRUD (Create, Read, Update, Delete) web application for managing
conflict reports and mediators using the MVC (Model-View-Controller) pattern.

PROJECT NAME: PeaceConnect - Conflict Reporting System
ENTITIES: 
  - Reports (signalements de conflits)
  - Mediators (mÃ©diateurs)

TECHNICAL REQUIREMENTS MET:
âœ… MVC Architecture (Model / View / Controller)
âœ… Object-Oriented Programming (OOP)
âœ… PDO for database connection (no MySQLi)
âœ… NO HTML5 input controls (type="date", "email", "tel", etc.)
âœ… JavaScript validation on ALL forms
âœ… Server-side (PHP) validation on ALL operations
âœ… Full CRUD operations for 2 entities

================================================================================
2. MVC ARCHITECTURE EXPLANATION
================================================================================

MVC is a design pattern that separates the application into 3 main parts:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERACTION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VIEW (views/)                                              â”‚
â”‚  - Displays data to the user                                â”‚
â”‚  - HTML pages, forms, tables                                â”‚
â”‚  - Contains presentation logic only                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTROLLER (controller/)                                   â”‚
â”‚  - Receives user requests                                   â”‚
â”‚  - Validates input                                          â”‚
â”‚  - Calls Model methods                                      â”‚
â”‚  - Returns response to View                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MODEL (model/)                                             â”‚
â”‚  - Represents data structure                                â”‚
â”‚  - Business logic                                           â”‚
â”‚  - Database operations (CRUD)                               â”‚
â”‚  - Data validation rules                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE (MySQL via PDO)                                   â”‚
â”‚  - Stores data persistently                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WHY USE MVC?
- Separation of Concerns: Each component has ONE job
- Maintainability: Easy to update one part without breaking others
- Reusability: Models can be used by multiple controllers
- Testability: Each layer can be tested independently
- Team Collaboration: Different developers can work on different layers

================================================================================
3. PROJECT STRUCTURE
================================================================================

module 3/
â”‚
â”œâ”€â”€ config.php                          [Database Connection]
â”‚   â””â”€â”€ PDO connection to MySQL database
â”‚
â”œâ”€â”€ model/                              [MODEL LAYER - Data & Business Logic]
â”‚   â”œâ”€â”€ Report.php                      â†’ Report class (OOP)
â”‚   â””â”€â”€ Mediator.php                    â†’ Mediator class (OOP)
â”‚
â”œâ”€â”€ controller/                         [CONTROLLER LAYER - Request Handling]
â”‚   â”œâ”€â”€ reportController.php            â†’ Report CRUD operations
â”‚   â”œâ”€â”€ mediatorController.php          â†’ Mediator CRUD operations
â”‚   â”œâ”€â”€ add_report.php                  â†’ Handle create report
â”‚   â”œâ”€â”€ update_report.php               â†’ Handle update report
â”‚   â”œâ”€â”€ delete_report.php               â†’ Handle delete report
â”‚   â”œâ”€â”€ add_mediator.php                â†’ Handle create mediator
â”‚   â”œâ”€â”€ update_mediator.php             â†’ Handle update mediator
â”‚   â””â”€â”€ delete_mediator.php             â†’ Handle delete mediator
â”‚
â”œâ”€â”€ views/                              [VIEW LAYER - Presentation]
â”‚   â”œâ”€â”€ back-office/                    [Admin Interface - CRUD]
â”‚   â”‚   â”œâ”€â”€ reports.php                 â†’ List all reports
â”‚   â”‚   â”œâ”€â”€ add_report.php              â†’ Form to add report
â”‚   â”‚   â”œâ”€â”€ update_report.php           â†’ Form to edit report
â”‚   â”‚   â”œâ”€â”€ mediators.php               â†’ List all mediators
â”‚   â”‚   â”œâ”€â”€ add_mediator.php            â†’ Form to add mediator
â”‚   â”‚   â””â”€â”€ update_mediator.php         â†’ Form to edit mediator
â”‚   â”‚
â”‚   â””â”€â”€ front-office/                   [Public Interface]
â”‚       â””â”€â”€ create-report.html          â†’ Public form for reports
â”‚
â”œâ”€â”€ assets/                             [Frontend Resources]
â”‚   â”œâ”€â”€ css/                            â†’ Stylesheets
â”‚   â”‚   â”œâ”€â”€ main.css
â”‚   â”‚   â”œâ”€â”€ components.css
â”‚   â”‚   â””â”€â”€ module3.css
â”‚   â”‚
â”‚   â””â”€â”€ js/                             â†’ JavaScript files
â”‚       â”œâ”€â”€ create-report.js            â†’ Front-office validation
â”‚       â”œâ”€â”€ backoffice-validation.js    â†’ Back-office validation
â”‚       â”œâ”€â”€ main.js                     â†’ Global functions
â”‚       â””â”€â”€ utils.js                    â†’ Helper functions
â”‚
â””â”€â”€ peaceconnect.sql                    [Database Schema]

================================================================================
4. DATABASE DESIGN
================================================================================

DATABASE NAME: peaceconnect

TABLE 1: reports
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COLUMN          â”‚ TYPE         â”‚ DESCRIPTION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ INT (PK)     â”‚ Auto-increment primary key          â”‚
â”‚ type            â”‚ VARCHAR(100) â”‚ Type of incident (conflict, etc.)   â”‚
â”‚ title           â”‚ VARCHAR(200) â”‚ Short title                         â”‚
â”‚ description     â”‚ TEXT         â”‚ Detailed description                â”‚
â”‚ location        â”‚ VARCHAR(200) â”‚ Location of incident (optional)     â”‚
â”‚ incident_date   â”‚ DATE         â”‚ Date of incident (optional)         â”‚
â”‚ priority        â”‚ ENUM         â”‚ low, medium, high                   â”‚
â”‚ status          â”‚ ENUM         â”‚ pending, assigned, resolved         â”‚
â”‚ created_at      â”‚ TIMESTAMP    â”‚ Auto-generated creation date        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLE 2: mediators
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COLUMN          â”‚ TYPE         â”‚ DESCRIPTION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ INT (PK)     â”‚ Auto-increment primary key          â”‚
â”‚ name            â”‚ VARCHAR(100) â”‚ Full name of mediator               â”‚
â”‚ email           â”‚ VARCHAR(150) â”‚ Email address                       â”‚
â”‚ phone           â”‚ VARCHAR(20)  â”‚ Phone number (optional)             â”‚
â”‚ expertise       â”‚ VARCHAR(200) â”‚ Area of expertise                   â”‚
â”‚ availability    â”‚ ENUM         â”‚ available, busy, unavailable        â”‚
â”‚ created_at      â”‚ TIMESTAMP    â”‚ Auto-generated creation date        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
5. HOW EACH COMPONENT WORKS
================================================================================

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
A) MODEL LAYER (model/)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE: model/Report.php

PURPOSE: Represents a Report object with all its properties and methods

STRUCTURE:
- Private properties (id, type, title, description, location, incident_date, 
  priority, status)
- Constructor with optional parameters (for creating new or existing reports)
- Getters: getId(), gettype(), gettitle(), etc.
- Setters: setId(), settype(), settitle(), etc.

EXAMPLE:
    $report = new Report(
        null,                    // id (null for new report)
        'Conflict',              // type
        'Office Dispute',        // title
        'Two employees arguing', // description
        'Building A',            // location
        '2025-01-15',           // incident_date
        'medium',               // priority
        'pending'               // status
    );

WHY USE CLASSES?
- Encapsulation: Data is protected (private properties)
- Type safety: Properties have specific types
- Reusability: Same class can create many Report objects
- OOP Principles: Follows object-oriented programming standards

---

FILE: model/Mediator.php

PURPOSE: Represents a Mediator object

STRUCTURE: Same pattern as Report.php
- Private properties (id, name, email, phone, expertise, availability)
- Constructor with optional parameters
- Getters and Setters

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
B) CONTROLLER LAYER (controller/)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE: controller/reportController.php

PURPOSE: Handles ALL database operations for reports

METHODS:

1. listReports()
   - Gets all reports from database
   - Returns: Array of all reports (ordered by ID DESC)
   - SQL: SELECT * FROM reports ORDER BY id DESC

2. addReport(Report $r)
   - Inserts a new report into database
   - Parameters: Report object
   - Returns: Boolean (success/failure)
   - SQL: INSERT INTO reports (type, title, ...) VALUES (?, ?, ...)

3. updateReport(Report $r)
   - Updates an existing report
   - Parameters: Report object with ID
   - Returns: Boolean (success/failure)
   - SQL: UPDATE reports SET type=?, title=? WHERE id=?

4. deleteReport($id)
   - Deletes a report by ID
   - Parameters: Report ID
   - Returns: Boolean (success/failure)
   - SQL: DELETE FROM reports WHERE id=?

5. getReportById($id)
   - Gets one specific report
   - Parameters: Report ID
   - Returns: Array with report data
   - SQL: SELECT * FROM reports WHERE id=?

SECURITY:
- Uses PDO prepared statements (prevents SQL injection)
- All queries use parameter binding (:id, :title, etc.)

---

FILE: controller/add_report.php

PURPOSE: Processes the "Add Report" form submission

FLOW:
1. Receive POST data from form
2. Validate all inputs (server-side)
   - Check required fields
   - Check length limits
   - Check format (dates, priorities)
3. If errors â†’ redirect back with error messages
4. If valid â†’ sanitize data (htmlspecialchars, trim)
5. Create Report object
6. Call reportController->addReport()
7. Redirect to reports list page

VALIDATION RULES:
- Type: Required, min 3 characters
- Title: Required, min 5 chars, max 100 chars
- Description: Required, min 10 characters
- Location: Optional, but if provided min 3 chars
- Incident Date: Optional, valid date format, not in future
- Priority: Must be 'low', 'medium', or 'high'

---

Similar pattern for:
- controller/update_report.php (updates existing report)
- controller/delete_report.php (deletes report)
- controller/mediatorController.php (CRUD for mediators)
- controller/add_mediator.php (creates mediator)
- controller/update_mediator.php (updates mediator)
- controller/delete_mediator.php (deletes mediator)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
C) VIEW LAYER (views/)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE: views/back-office/reports.php

PURPOSE: Display list of all reports in a table

WHAT IT DOES:
1. Includes reportController.php
2. Creates controller instance: $rc = new reportController()
3. Gets all reports: $reports = $rc->listReports()
4. Displays reports in HTML table
5. Provides Edit and Delete buttons for each report

HTML STRUCTURE:
- Complete HTML5 document (<!DOCTYPE>, <head>, <body>)
- CSS styling (embedded in <style> tags)
- Navigation buttons (Add Report, View Mediators)
- Table with columns: ID, Type, Title, Priority, Status, Actions
- JavaScript for delete confirmation

---

FILE: views/back-office/add_report.php

PURPOSE: Form to create a new report

FEATURES:
- Full HTML structure with labels
- Form fields for all report properties
- Embedded CSS for styling
- JavaScript validation (backoffice-validation.js)
- Submit button sends POST to ../../controller/add_report.php
- Back button to return to reports list

FORM FIELDS:
- Type (text input, required)
- Title (text input, required)
- Description (textarea, required)
- Location (text input, optional)
- Incident Date (text input, format YYYY-MM-DD)
- Priority (select dropdown: low/medium/high)

NO HTML5 CONTROLS:
âŒ NO type="date" â†’ Using type="text" with validation
âŒ NO type="email" â†’ Using type="text" with regex validation
âŒ NO type="tel" â†’ Using type="text" with pattern validation

---

FILE: views/back-office/update_report.php

PURPOSE: Form to edit an existing report

WHAT IT DOES:
1. Gets report ID from URL (?id=123)
2. Calls getReportById() to fetch current data
3. Pre-fills form fields with existing values
4. On submit, sends to ../../controller/update_report.php

Similar structure for all other view files:
- mediators.php (list mediators)
- add_mediator.php (create mediator form)
- update_mediator.php (edit mediator form)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
D) DATABASE CONNECTION (config.php)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE: config.php

PURPOSE: Centralized database connection using PDO

HOW IT WORKS:
- Uses Singleton pattern (only one connection)
- Static method: config::getConnexion()
- Returns PDO object

CONNECTION DETAILS:
- Host: localhost
- Username: root
- Password: (empty)
- Database: peaceconnect
- Error Mode: PDO::ERRMODE_EXCEPTION (throws exceptions on errors)

WHY PDO?
âœ… Prepared statements (security)
âœ… Support for multiple databases (MySQL, PostgreSQL, etc.)
âœ… Object-oriented interface
âœ… Better error handling
âŒ NOT MySQLi (requirement: PDO only)

USAGE IN CONTROLLERS:
    $this->db = config::getConnexion();
    $stmt = $this->db->prepare("SELECT * FROM reports");
    $stmt->execute();

================================================================================
6. VALIDATION SYSTEM (CLIENT & SERVER)
================================================================================

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
A) CLIENT-SIDE VALIDATION (JavaScript)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE: assets/js/backoffice-validation.js

PURPOSE: Validate forms BEFORE sending to server (instant feedback)

FUNCTIONS:

1. validateReportForm()
   - Validates: type, title, description, location, incident_date, priority
   - Checks: required fields, length limits, format
   - Shows error messages in real-time

2. validateMediatorForm()
   - Validates: name, email, phone, expertise, availability
   - Email format: regex pattern /^[^\s@]+@[^\s@]+\.[^\s@]+$/
   - Phone format: min 8 digits, allows +, -, (, ), spaces
   - Name: only letters, spaces, hyphens, apostrophes

3. showError(input, message)
   - Displays red error message below field
   - Changes input border to red

4. clearError(input)
   - Removes error message
   - Resets input styling

EVENT LISTENERS:
- Form submit: Validates all fields before submission
- Input blur: Validates individual field when user leaves it

---

FILE: assets/js/create-report.js

PURPOSE: Multi-step form validation for front-office

FEATURES:
- 3-step form (incident type â†’ description â†’ evidence)
- Validates each step before allowing "Next"
- Date validation: DD/MM/YYYY format, not in future
- Progress bar updates
- File size validation (max 10MB)

VALIDATION FUNCTIONS:
- validateStep1(): Radio buttons (incident type, role)
- validateStep2(): Title, description, date
- validateStep3(): File uploads
- goToStep(): Navigate between steps

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
B) SERVER-SIDE VALIDATION (PHP)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WHY SERVER-SIDE VALIDATION?
âš ï¸ JavaScript can be disabled or bypassed
âš ï¸ Users can manipulate browser console
âš ï¸ Direct POST requests can skip JavaScript
âœ… Server validation is the FINAL security layer

VALIDATION IN controller/add_report.php:

STEP 1: Initialize error array
    $errors = [];

STEP 2: Validate each field
    // Type validation
    if (empty($_POST['type'])) {
        $errors[] = "Le type est obligatoire";
    } elseif (strlen(trim($_POST['type'])) < 3) {
        $errors[] = "Le type doit contenir au moins 3 caractÃ¨res";
    }

STEP 3: Check for errors
    if (!empty($errors)) {
        $_SESSION['errors'] = $errors;
        header("Location: ../views/back-office/add_report.php");
        exit;
    }

STEP 4: Sanitize data
    $type = htmlspecialchars(trim($_POST['type']));
    $title = htmlspecialchars(trim($_POST['title']));

SANITIZATION FUNCTIONS:
- trim(): Remove whitespace from beginning/end
- htmlspecialchars(): Prevent XSS attacks (converts <, >, & to HTML entities)
- filter_var(): Validate email format
- intval(): Convert to integer safely
- preg_match(): Validate patterns (phone, name)

VALIDATION RULES APPLIED:
âœ… Required fields must not be empty
âœ… Length limits enforced (min/max characters)
âœ… Format validation (dates, emails, phones)
âœ… Enum validation (priority, status, availability)
âœ… Type checking (ID must be numeric)
âœ… Business rules (date cannot be in future)

================================================================================
7. HOW TO DEMONSTRATE THE PROJECT
================================================================================

STEP-BY-STEP DEMONSTRATION:

1. DATABASE SETUP
   â–¶ Import peaceconnect.sql into phpMyAdmin
   â–¶ Show the two tables: reports and mediators
   â–¶ Explain table structure and relationships

2. SHOW MVC STRUCTURE
   â–¶ Open folder structure in File Explorer
   â–¶ Point out model/, controller/, views/ separation
   â–¶ Explain config.php (PDO connection)

3. DEMONSTRATE REPORTS CRUD
   
   A) CREATE (Add Report)
   â–¶ Go to: http://localhost/module 3/views/back-office/add_report.php
   â–¶ Try submitting empty form â†’ Show JavaScript validation
   â–¶ Enter invalid data (short title) â†’ Show error messages
   â–¶ Fill form correctly â†’ Click Add
   â–¶ Show redirect to reports.php with new entry
   â–¶ Open phpMyAdmin â†’ Show new record in database
   
   B) READ (List Reports)
   â–¶ Go to: http://localhost/module 3/views/back-office/reports.php
   â–¶ Show table with all reports
   â–¶ Point out badges for priority and status
   â–¶ Show data came from database via controller
   
   C) UPDATE (Edit Report)
   â–¶ Click "Modifier" button on a report
   â–¶ Show form pre-filled with existing data
   â–¶ Change some values â†’ Submit
   â–¶ Return to list â†’ Show updated values
   â–¶ Check database â†’ Confirm changes
   
   D) DELETE (Remove Report)
   â–¶ Click "Supprimer" on a report
   â–¶ Show JavaScript confirmation dialog
   â–¶ Confirm deletion
   â–¶ Show report removed from list
   â–¶ Check database â†’ Record gone

4. DEMONSTRATE MEDIATORS CRUD
   â–¶ Go to: http://localhost/module 3/views/back-office/mediators.php
   â–¶ Repeat same CRUD operations for mediators
   â–¶ Show email validation (try invalid email format)
   â–¶ Show phone validation (try letters)

5. EXPLAIN CODE FLOW (Pick one operation, e.g., Add Report)
   
   USER ACTION â†’ VIEW â†’ CONTROLLER â†’ MODEL â†’ DATABASE
   
   â–¶ User fills form in add_report.php (VIEW)
   â–¶ JavaScript validates before submit
   â–¶ Form submits to controller/add_report.php (CONTROLLER)
   â–¶ PHP validates data (server-side)
   â–¶ Creates Report object (MODEL)
   â–¶ Controller calls addReport() method
   â–¶ reportController uses PDO to INSERT into database
   â–¶ Redirects back to reports.php (VIEW)
   â–¶ View fetches updated data and displays

6. SHOW NO HTML5 CONTROLS
   â–¶ Open add_report.php in browser
   â–¶ Right-click â†’ View Page Source
   â–¶ Show: <input type="text"> (NOT type="date")
   â–¶ Show: <input type="text"> (NOT type="email")
   â–¶ Explain validation is done with JavaScript/PHP instead

7. DEMONSTRATE VALIDATION LAYERS

   A) JavaScript Validation (Immediate)
   â–¶ Try submitting empty form â†’ Instant error
   â–¶ Enter 2 characters in name field â†’ Error appears on blur
   
   B) Server Validation (Fallback)
   â–¶ Open browser console (F12)
   â–¶ Disable JavaScript or modify HTML
   â–¶ Try submitting invalid data
   â–¶ PHP catches it and redirects with errors
   â–¶ This proves server validation works independently

8. CODE REVIEW
   â–¶ Open Report.php â†’ Show OOP class structure
   â–¶ Open reportController.php â†’ Show CRUD methods with PDO
   â–¶ Open add_report.php (controller) â†’ Show validation logic
   â–¶ Open reports.php (view) â†’ Show how data is displayed

================================================================================
8. KEY POINTS TO EXPLAIN TO TEACHER
================================================================================

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUESTION: "Explain the MVC architecture of your project"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER:
"My project follows the MVC pattern which separates concerns into 3 layers:

MODEL (model/):
- Report.php and Mediator.php are PHP classes
- They represent the data structure with private properties
- Each has getters and setters following OOP principles
- They define what a Report or Mediator looks like

VIEW (views/):
- Contains all HTML pages for display
- reports.php shows list of reports in a table
- add_report.php has forms to input data
- Views only display data, no business logic
- They receive data from controllers and show it to users

CONTROLLER (controller/):
- reportController.php has methods for database operations
- add_report.php processes form submissions
- Controllers validate input, call model methods, interact with database
- They act as intermediaries between View and Model

FLOW EXAMPLE:
When a user adds a report:
1. View (add_report.php) shows the form
2. User submits â†’ Controller (controller/add_report.php) receives data
3. Controller validates and creates Report object (Model)
4. Controller saves to database using reportController
5. Controller redirects to View (reports.php) to show updated list

This separation makes code maintainable, testable, and follows industry standards."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUESTION: "Why do you use PDO instead of MySQLi?"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER:
"I use PDO (PHP Data Objects) for several reasons:

1. SECURITY: PDO uses prepared statements with parameter binding
   Example: 
   $stmt->execute([':id' => $id]);
   This prevents SQL injection attacks.

2. DATABASE AGNOSTIC: PDO works with MySQL, PostgreSQL, SQLite, etc.
   MySQLi only works with MySQL.

3. CONSISTENCY: PDO uses a consistent interface across different databases.

4. ERROR HANDLING: PDO has better exception handling
   I configured: PDO::ATTR_ERRMODE â†’ PDO::ERRMODE_EXCEPTION

5. OBJECT-ORIENTED: PDO follows OOP principles which matches our MVC approach.

In config.php, I create a singleton PDO connection:
   $pdo = new PDO("mysql:host=localhost;dbname=peaceconnect", "root", "");

All controllers use this same connection for consistency."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUESTION: "Why don't you use HTML5 input types?"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER:
"The project requirement specified NO HTML5 controls. Instead of:
- type='date' â†’ I use type='text' with JavaScript date validation
- type='email' â†’ I use type='text' with regex validation
- type='tel' â†’ I use type='text' with pattern validation

ADVANTAGES of this approach:
1. Full control over validation logic
2. Consistent user experience across all browsers
3. Custom error messages in French
4. Can enforce specific formats (DD/MM/YYYY vs YYYY-MM-DD)

VALIDATION IS DONE IN 2 LAYERS:
- JavaScript (client): Immediate feedback, better UX
- PHP (server): Final security check, cannot be bypassed

Example from my code:
   const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
   if (!emailRegex.test(emailValue)) {
       showError(email, 'Format d\'email invalide');
   }"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUESTION: "Explain your validation system"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER:
"I implemented a TWO-LAYER validation system:

LAYER 1: CLIENT-SIDE (JavaScript)
File: assets/js/backoffice-validation.js

Purpose: Provide immediate feedback to users
- Validates on form submit
- Shows error messages in real-time
- Validates on blur (when user leaves a field)

Example: Email validation
   const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
   if (!emailRegex.test(emailValue)) {
       showError(email, 'Format d\'email invalide');
   }

LAYER 2: SERVER-SIDE (PHP)
Files: controller/add_report.php, add_mediator.php, etc.

Purpose: Final security layer (JavaScript can be disabled)
- Validates ALL input before database operations
- Sanitizes data to prevent XSS attacks
- Checks business rules (date not in future, etc.)

Example: Report validation
   if (empty($_POST['title'])) {
       $errors[] = "Le titre est obligatoire";
   } elseif (strlen(trim($_POST['title'])) < 5) {
       $errors[] = "Le titre doit contenir au moins 5 caractÃ¨res";
   }

SANITIZATION:
   $title = htmlspecialchars(trim($_POST['title']));
   
- trim(): Removes extra spaces
- htmlspecialchars(): Converts <script> to &lt;script&gt; (prevents XSS)

WHY BOTH LAYERS?
âœ… JavaScript: Better user experience (instant feedback)
âœ… PHP: Security (cannot be bypassed by disabling JavaScript)
âœ… Defense in depth: Multiple protection layers"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUESTION: "Walk me through a complete CRUD operation"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER:
"Let me explain ADD REPORT operation step by step:

STEP 1: User opens form
URL: http://localhost/module 3/views/back-office/add_report.php
- View displays HTML form with all fields
- JavaScript validation script loads

STEP 2: User fills form
- Types in: type, title, description, location, date, priority
- JavaScript validates on blur (field loses focus)
- Real-time error messages appear if invalid

STEP 3: User clicks 'Submit'
- JavaScript validates entire form
- If errors â†’ prevent submission, show messages
- If valid â†’ form submits POST request

STEP 4: Controller receives request
File: controller/add_report.php
- PHP starts session: session_start();
- Receives $_POST data
- Validates AGAIN server-side (security)
- Checks: required fields, length, format, business rules

STEP 5: Sanitization
- $title = htmlspecialchars(trim($_POST['title']));
- Prevents XSS attacks and SQL injection

STEP 6: Create Model object
- $r = new Report(null, $type, $title, ...);
- null for ID (auto-increment in database)

STEP 7: Call Controller method
- $rc = new reportController();
- $rc->addReport($r);

STEP 8: Database operation (in reportController)
- Prepares SQL: INSERT INTO reports (...) VALUES (:type, :title, ...)
- Binds parameters: [':type' => $r->gettype(), ...]
- Executes query via PDO
- Returns true/false

STEP 9: Redirect to list view
- header('Location: ../views/back-office/reports.php');
- User sees updated list with new report

STEP 10: Display (in reports.php)
- Creates reportController instance
- Calls listReports() method
- Fetches all reports from database
- Displays in HTML table with styling

DATA FLOW SUMMARY:
Form (VIEW) â†’ Validation (JS) â†’ Controller (PHP validation) â†’ Model (Report class)
â†’ reportController (PDO) â†’ Database (INSERT) â†’ Redirect â†’ reports.php (VIEW)
â†’ Fetch data (SELECT) â†’ Display table"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUESTION: "What OOP principles did you apply?"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER:
"I applied several OOP principles:

1. ENCAPSULATION
- All properties in Report and Mediator classes are PRIVATE
- Access only through public getters and setters
  
  Example:
    private ?string $title;  // Cannot access directly
    public function gettitle(): ?string { return $this->title; }

2. ABSTRACTION
- Hide complex database logic inside controller classes
- User doesn't need to know SQL queries
  
  Example:
    $rc->addReport($r);  // Simple method call
    // Internally: prepared statements, parameter binding, etc.

3. CONSTRUCTOR INITIALIZATION
- Objects can be created with all properties at once
  
  Example:
    $report = new Report(1, 'Conflict', 'Title', ...);

4. TYPE HINTING
- Methods specify expected parameter types
  
  Example:
    public function addReport(Report $r)  // Expects Report object

5. NULL SAFETY
- Using nullable types (?int, ?string) for optional fields
  
  Example:
    private ?string $location;  // Can be null

6. SEPARATION OF CONCERNS
- Report class: Just data structure
- reportController class: Database operations
- Each class has ONE responsibility

7. REUSABILITY
- Same Report class used for create, update, display
- Same reportController used by all report operations

These principles make code:
âœ… Maintainable (easy to modify)
âœ… Secure (data protection)
âœ… Readable (clear structure)
âœ… Testable (isolated components)"

================================================================================
9. COMMON ISSUES & TROUBLESHOOTING
================================================================================

ISSUE: "Page shows blank or PHP code"
SOLUTION: Make sure XAMPP Apache is running. PHP must be processed by server.

ISSUE: "Database connection error"
SOLUTION: 
- Check MySQL is running in XAMPP
- Verify database name is "peaceconnect" in config.php
- Import peaceconnect.sql file

ISSUE: "Call to undefined function"
SOLUTION: Check require_once paths are correct (../../controller/...)

ISSUE: "Headers already sent" error
SOLUTION: No output before header() redirect. Check for spaces before <?php

ISSUE: "Validation not working"
SOLUTION: Check JavaScript file is loaded: <script src="..."></script>

================================================================================
10. PROJECT STRENGTHS (Mention to Teacher)
================================================================================

âœ… FOLLOWS MVC ARCHITECTURE strictly (Model/View/Controller separation)
âœ… USES PDO exclusively (no MySQLi)
âœ… IMPLEMENTS OOP with proper encapsulation
âœ… DUAL VALIDATION SYSTEM (JavaScript + PHP)
âœ… SECURITY: Prepared statements, sanitization, XSS prevention
âœ… NO HTML5 CONTROLS (as required)
âœ… FULL CRUD for 2 entities (Reports & Mediators)
âœ… CLEAN CODE: Proper indentation, comments, naming conventions
âœ… USER-FRIENDLY: Error messages, confirmations, styling
âœ… SCALABLE: Easy to add new entities or features

================================================================================
END OF DOCUMENTATION
================================================================================

ğŸ“§ For questions about this project, review the code comments and this document.
Good luck with your presentation! ğŸš€

